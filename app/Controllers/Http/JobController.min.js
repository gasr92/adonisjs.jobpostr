"use strict";const Job=use("App/Models/Job");class JobController{async home({view:view}){const jobs=await Job.all();return view.render("index",{jobs:jobs.toJSON()})}async userIndex({view:view,auth:auth}){const jobs=await auth.user.jobs().fetch();return console.log(jobs),view.render("jobs",{jobs:jobs.toJSON()})}async create({request:request,response:response,session:session,auth:auth}){const job=request.all(),posted=await auth.user.jobs().create({title:job.title,link:job.link,description:job.description});return session.flash({message:"Your job has been posted!"}),response.redirect("back")}async delete({response:response,session:session,params:params}){const job=await Job.find(params.id);return await job.delete(),session.flash({message:"Your job has been removed"}),response.redirect("back")}async edit({params:params,view:view}){const job=await Job.find(params.id);return view.render("edit",{job:job})}async update({response:response,request:request,session:session,params:params}){const job=await Job.find(params.id);return job.title=request.all().title,job.link=request.all().link,job.description=request.all().description,await job.save(),session.flash({message:"Your job has been updated. "}),response.redirect("/post-a-job")}}module.exports=JobController;